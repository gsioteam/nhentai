<scaffold>
    <attr:appbar>
        <appbar>
            <text>$title</text>
            <attr:actions>
                <button onPressed="onDownloadPressed" type="icon">
                    <icon>download_rounded</icon>
                </button>
            </attr:actions>
        </appbar>
    </attr:appbar>
    <refresh onRefresh="onRefresh" loading="$loading">
        <slivers>
            <sliver-container>
                <view padding="all(5)">
                    <Row crossAxisAlignment="start">
                        <view width="90" height="120" padding="ltrb(5,5,5,0)">
                            <img width="90" height="120" fit="cover" gaplessPlayback="true" src="$picture">
                            </img>
                        </view>
                        <Expanded>
                            <Column crossAxisAlignment="start">
                                <text>$title</text>
                                <text color="grey" size="12">$subtitle</text>
                                <view padding="all(3)"/>

                                <Column crossAxisAlignment="start">
                                    <for array="$tags">
                                        <view padding="ltrb(5,2,5,2)">
                                            <text>
                                                <span size="12">${item.title}</span>
                                                <for array="${item.links}" item="link">
                                                    <span>
                                                        <view margin="ltrb(3,1,3,1)"> 
                                                            <row mainAxisSize="min">
                                                                <view padding="ltrb(4,2,1,2)" color="hex(#505050)">
                                                                    <text color="white" size="8">
                                                                        ${link.name}
                                                                    </text>
                                                                </view>
                                                                <view padding="ltrb(1,2,4,2)" color="grey">
                                                                    <text color="white" size="8">
                                                                        ${link.count}
                                                                    </text>
                                                                </view>
                                                            </row>
                                                        </view>
                                                    </span>
                                                </for>
                                            </text>
                                        </view>
                                    </for>
                                </Column>
                            </Column>
                        </Expanded>
                    </Row>
                </view>
            </sliver-container>
            <sliver-container>
                <view padding="all(8)" margin="ltrb(0,0,0,5)" color="white" elevation="4">
                    <Row>
                        <icon>list</icon>
                        <text>List</text>
                    </Row>
                </view>
            </sliver-container>
            <sliver-grid-view childAspectRatio="0.8">
                <for array="$images"> 
                    <button type="material" padding="zero">
                        <attr:onPressed>
                            <callback function="onImagePressed" args="array($index)"/>
                        </attr:onPressed>
                        <view width="infinity()" height="infinity()" color="grey">
                            <img fit="cover" src="$item"/>
                        </view>
                    </button>
                </for>
            </sliver-grid-view>
        </slivers>
    </refresh>
</scaffold>